self.onmessage=function(event){const{code:code,ESM:ESM,TS:TS,formatCode:formatCode}=event.data;let transpiledCode;function ESMTranspile(e){return importScripts("../libs/babel/babel.min.js"),Babel.transform(e,{presets:["env","es2015"],plugins:["transform-modules-umd"]}).code}function TSTranspile(e){return importScripts("../libs/babel/babel.min.js"),Babel.transform(e,{filename:"script.ts",presets:["typescript"],plugins:["transform-modules-umd"]}).code}performance.mark("executionStarted"),transpiledCode=!0===ESM?ESMTranspile(code):!0===TS?TSTranspile(code):code;const timers={},counts={};let level=0;function JavaScriptObject(e,r=1,t=formatCode){let n=t?" ".repeat(4*r):"",o=t?"{\n":"{";for(let l in e)if(e.hasOwnProperty(l)){let a=e[l];"string"==typeof a?a=`'${JavaScriptString(a)}'`:Array.isArray(a)?a=JavaScriptArray(a,r+1,t):"object"==typeof a&&null!==a&&(a=JavaScriptObject(a,r+1,t)),o+=t?`${n}${l}: ${a},\n`:`${l}:${a},`}return o=t?o.slice(0,-2)+`\n${" ".repeat(4*(r-1))}}`:o.slice(0,-1)+"}",o}function JavaScriptArray(e,r=1,t=formatCode){let n=t?" ".repeat(4*r):"",o=t?"[\n":"[";for(let l=0;l<e.length;l++){let a=e[l];"string"==typeof a?a=`'${JavaScriptString(a)}'`:Array.isArray(a)?a=JavaScriptArray(a,r+1,t):"object"==typeof a&&null!==a&&(a=JavaScriptObject(a,r+1,t)),o+=t?`${n}${a},\n`:`${a},`}return o=t?o.slice(0,-2)+`\n${" ".repeat(4*(r-1))}]`:o.slice(0,-1)+"]",o}function JavaScriptString(e){return e=(e=(e=(e=(e=e.replace(/\\/g,"\\").replace(/\'/g,"'").replace(/\"/g,'"').replace(/\n/g,"\n").replace(/\r/g,"\r").replace(/\t/g,"\t")).replace(/\u([0-9A-Fa-f]{4})/g,((e,r)=>String.fromCharCode(parseInt(r,16))))).replace(/\u\{([0-9A-Fa-f]+)\}/g,((e,r)=>String.fromCodePoint(parseInt(r,16))))).replace(/\x([0-9A-Fa-f]{2})/g,((e,r)=>String.fromCharCode(parseInt(r,16))))).replace(/\([0-7]{1,3}\)/g,((e,r)=>String.fromCharCode(parseInt(r,8))))}function JavaScriptNumber(e){return e}function JavaScriptBoolean(e){return e}function JavaScriptBigInt(){return`${num}n`}function masterConsoleHandler(e,...r){let t=r.map((e=>{let r;switch(e.constructor.name){case"Array":r=JavaScriptArray(e);break;case"Object":r=JavaScriptObject(e);break;case"String":r=JavaScriptString(e);break;case"BigInt":r=JavaScriptBigInt(e);break;case"Number":r=JavaScriptNumber(e);break;case"Boolean":r=JavaScriptBoolean(e);break;default:r=e}return r})).join(" ");return t=" ".repeat(2*level)+t.replace(/\u000A/g,"\n"+" ".repeat(2*level)),{type:e,message:t,typeOf:typeof r}}console.log=(...e)=>{self.postMessage(masterConsoleHandler("log",...e))},console.warn=(...e)=>{self.postMessage(masterConsoleHandler("warn",...e))},console.error=(...e)=>{self.postMessage(masterConsoleHandler("error",...e))},console.time=(e="default")=>{timers[e]=performance.now()},console.timeLog=(e="default",...r)=>{if(timers[e]){const t=`${e}: ${+(performance.now()-timers[e]).toFixed(3)}ms`;self.postMessage({type:"log",message:[t,...r].join(" ")})}else{const r=`No such label: ${e}`;self.postMessage({type:"error",message:r})}},console.timeEnd=(e="default",...r)=>{if(timers[e]){const t=`${e}: ${+(performance.now()-timers[e]).toFixed(3)}ms - timer ended`;self.postMessage({type:"log",message:[t,...r].join(" ")}),delete timers[e]}else{const r=`No such label: ${e}`;self.postMessage({type:"error",message:r})}},console.count=(e="default")=>{counts[e]?counts[e]++:counts[e]=1;const r=`${e}: ${counts[e]}`;self.postMessage({type:"log",message:r})},console.countReset=(e="default")=>{if(counts[e])counts[e]=0;else{const r=`No such label: ${e}`;self.postMessage({type:"error",message:r})}},console.assert=(e,...r)=>{if(!e){const e=`Assertion failed: ${r.join(" ")}`;self.postMessage({type:"error",message:e})}},console.info=(...e)=>{self.postMessage(masterConsoleHandler("info",...e))},console.debug=(...e)=>{self.postMessage(masterConsoleHandler("debug",...e))},console.group=()=>{level++},console.groupEnd=()=>{level--},console.groupCollapsed=()=>{level++},console.dir=e=>{const r=function e(r,t=0){let n=" ".repeat(4*t),o="";if("object"==typeof r&&null!==r)if(Array.isArray(r))o+=JavaScriptArray(r);else{o+="Object";let l=!0;for(let a in r)if(r.hasOwnProperty(a)){l&&(o+="\n",l=!1);let s=r[a];o+="object"==typeof s&&null!==s?`${n}${a}: ${e(s,t+1)}\n`:"function"==typeof s?`${n}${a}: ${s.toString()}\n`:"string"==typeof s?`${n}${a}: "${s}"\n`:`${n}${a}: ${s}\n`}o=o.trim()}else o+=String(r);return o.trim()}(e);self.postMessage({type:"log",message:r})},console.table=e=>{e&&"object"==typeof e?self.postMessage({type:"log",message:function(e){var r=Math.floor;function t(e,t,n,o,l){var a,s,c=String.fromCharCode,i="";if(o&&(i+=" "),"letter"==n){s="",a=l;do{s=c(65+a%26)+s,a=r(a/26)-1}while(-1<a);i+=s}else i+=(l+1).toString();return o&&(i+=" "),{cell:{x:e,y:t,colspan:1,rowspan:1},empty:!1,pseudoRows:[i],maxWidth:i.length,vAlign:"middle",hAlign:"center"}}function n(e,r,t,n,i,f,p,u,g,m){var d,h,y,b,v,x="";if(-1==m){if(y="horizontalTop","none"==g.horizontalTop)return x}else if(m>=e.vLen-1){if(y="horizontalBottom","none"==g.horizontalBottom)return x}else if(s(e,g,m,p))y="horizontalInnerHeader";else{if(!c(e,g,m))return x;y="horizontalInner"}var S=g[y],A=i[f][S].horizontal;for(x+=o(e,g,p,u,n,m,-1),d=0;d<r.length;d++){if(b=!0,-1<m&&((v=e.arr[m][d]).cell.x+v.cell.rowspan-1>m&&(b=!1,x+=a(e,l(e,t,g,p,m+1,d)-1,r,m,d),d+=v.cell.colspan-1)),b)for(h=0;h<r[d];h++)x+=A;x+=o(e,g,p,u,n,m,d)}return 0==r.length&&(x+=o(e,g,p,u,n,m,r.length)),x+="\n"}function o(e,r,t,n,o,l,a){var i,f,p,u,g,m,d,h="";if(-1==l)i=!0,f=!1,g="horizontalTop";else if(l>=e.vLen-1)i=!1,f=!0,g="horizontalBottom";else if(i=!1,f=!1,s(e,r,l,t))g="horizontalInnerHeader";else{if(!c(e,r,l))return h;g="horizontalInner"}if(-1==a)p=!0,u=!1,d="verticalLeft";else if(a>=e.hLen-1)p=!1,u=!0,d="verticalRight";else if(p=!1,u=!1,"none"!=n&&0==a)d="verticalInnerHeader";else{if(!(a<e.hLen-1))return h;d="verticalInner"}!i&&0<=a&&((m=e.arr[l][a]).cell.y+m.cell.colspan-1>a&&(i=!0)),!f&&0<=a&&((m=e.arr[l+1][a]).cell.y+m.cell.colspan-1>a&&(f=!0)),!p&&0<=l&&((m=e.arr[l][a]).cell.x+m.cell.rowspan-1>l&&(p=!0)),!u&&0<=l&&((m=e.arr[l][a+1]).cell.x+m.cell.rowspan-1>l&&(u=!0));var y=r[g],b=r[d];return h+=o[i?"none":b][u?"none":y][f?"none":b][p?"none":y]}function l(e,r,t,n,o,l){var a,i,f,p=Math.ceil;return f=function(e,r,t,n,o,l){var a,i,f;for(a=0,i=n[o.cell.x],f=1;f<o.cell.rowspan;f++)i+=s(e,r,o.cell.x+f-1,t)||c(e,r,o.cell.x+f-1)?1:0,o.cell.x+f<=l&&(a=i),i+=n[o.cell.x+f];return{height:i,offset:a}}(e,t,n,r,i=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y],o),a=f.offset,a+="bottom"==i.vAlign?i.pseudoRows.length-f.height:"middle"==i.vAlign?p((i.pseudoRows.length-f.height)/2):0}function a(e,t,n,o,l){var a,s,c,i,f,p="";for(s=function(e,r){var t,n;for(t=e[r.cell.y],n=1;n<r.cell.colspan;n++)t+=1,t+=e[r.cell.y+n];return t}(n,a=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y]),i=a.empty?"":a.pseudoRows[t]||"",f="right"==a.hAlign?s-i.length:"center"==a.hAlign?r((s-i.length)/2):0,c=0;c<f;c++)p+=" ";for(p+=function(e){return e.replace(/[<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))}(i),f=s-i.length-f,c=0;c<f;c++)p+=" ";return p}function s(e,r,t,n){return"none"!=r.horizontalInnerHeader&&"none"!=n&&0==t&&1<e.vLen}function c(e,r,t){return"none"!=r.horizontalInner&&t<e.vLen-1}var i,f,p,u,g={none:{none:{double:{double:"╗"}},double:{none:{double:"═"},double:{none:"╔",double:"╦"}}},double:{none:{none:{double:"╝"},double:{none:"║",double:"╣"}},double:{none:{none:"╚",double:"╩"},double:{none:"╠",double:"╬"}}}},m={unicode:{double:{vertical:g.double.none.double.none,horizontal:g.none.double.none.double}}},d=!0,h="unicode",y="first_line",b="none",v={horizontalTop:"double",horizontalInnerHeader:"double",horizontalInner:"double",horizontalBottom:"double",verticalLeft:"double",verticalInnerHeader:"double",verticalInner:"double",verticalRight:"double",asciiIntersection:"plus"},x=function(e,r,n,o){var l,a,s,c,i,f,p,u,g,m=[],d=e,h=0,y=0;for(l=0;l<d.length;l++){if(0==l&&("number"==n||"letter"==n)){for(m.push([]),("number"==o||"letter"==o)&&(m[0][0]={cell:{x:0,y:0,colspan:1,rowspan:1},empty:!0},y=1),a=0;a<d[l].length;a++)m[0][a+y]={cell:{x:0,y:a+y,colspan:1,rowspan:1},empty:!0};h=1}for(m.push([]),("number"==o||"letter"==o)&&(m[l+h][0]={cell:{x:l+h,y:0,colspan:1,rowspan:1},empty:!0},y=1),a=0;a<d[l].length;a++)if(c={x:l+h,y:a+y,colspan:1,rowspan:1},i=d[l][a]){for(p=0,f=i.toString().split("\n"),s=0;s<f.length;s++)r&&(0!==f[s].indexOf(" ",0)&&(f[s]=" "+f[s]),-1===f[s].indexOf(" ",f[s].length-1)&&(f[s]+=" ")),f[s].length>p&&(p=f[s].length);m[l+h][a+y]={cell:c,empty:!1,pseudoRows:f,maxWidth:p,vAlign:"top",hAlign:"left"}}else m[l+h][a+y]={cell:c,empty:!0}}if(u=function(e,r,t){var n,o,l,a,s=0;for(n=r;0<=n;n--)for(o=0;o<=t;o++)(l=e[n][o]).empty||(a=l.cell.x+l.cell.rowspan)>s&&(s=a);return s}(m,l+h-1,a+y-1),g=function(e,r,t){var n,o,l,a,s=0;for(o=t;0<=o;o--)for(n=0;n<=r;n++)(l=e[n][o]).empty||(a=l.cell.y+l.cell.colspan)>s&&(s=a);return s}(m,l+h-1,a+y-1),"none"!=o&&(y=1),"number"==n||"letter"==n)for(a=0;a<g-y;a++)m[0][a+y]=t(0,a+y,n,r,a);if("none"!=n&&(h=1),"number"==o||"letter"==o)for(l=0;l<u-h;l++)m[l+h][0]=t(l+h,0,o,r,l);return{arr:m,vLen:u,hLen:g}}(e,d,y,b),S=function(e,r){var t,n,o,l,a=[],s=[];for(n=0;n<e.hLen;n++){for(o=0,r&&(o=1),t=0;t<e.vLen;t++)(l=e.arr[t][n]).empty||(1==l.cell.colspan&&1==l.cell.rowspan?l.maxWidth>o&&(o=l.maxWidth):t==l.cell.x&&n==l.cell.y&&s.push(l));a[n]=o}return a}(x,d),A=function(e,r,t,n){var o,l,a,s,c=[],i=[];for(o=0;o<e.vLen;o++){for(a=0,n&&(a=1),l=0;l<e.hLen;l++)(s=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y]).empty||(1==s.cell.colspan&&1==s.cell.rowspan?s.pseudoRows.length>a&&(a=s.pseudoRows.length):o==s.cell.x&&l==s.cell.y&&i.push(s));c[o]=a}return c}(x,0,0,d),$="";for($+=n(x,S,A,g,m,h,y,b,v,-1),i=0;i<x.vLen;i++){for(u=[],f=0;f<S.length;f++)u[f]=l(x,A,v,y,i,f);for(p=0;p<A[i];p++){for($+=m[h][v.verticalLeft].vertical,f=0;f<S.length;f++)$+=a(x,u[f]+p,S,i,f),(f+=x.arr[i][f].cell.colspan-1)<S.length-1&&($+=m[h][v.verticalInner].vertical);$+=m[h][v.verticalRight].vertical,$+="\n"}$+=n(x,S,A,g,m,h,y,b,v,i)}return 0==x.vLen&&($+=n(x,S,A,g,m,h,y,b,v,x.vLen)),$.trim()}(function(e){const r=e.length||Object.keys(e).length,{maxObjectLength:t,maxArrayLength:n}=Object.values(e).reduce(((e,r)=>("object"!=typeof r||Array.isArray(r)?Array.isArray(r)&&(e.maxArrayLength=Math.max(e.maxArrayLength,r.length)):e.maxObjectLength=Math.max(e.maxObjectLength,Object.keys(r).length),e)),{maxObjectLength:0,maxArrayLength:0}),o=t+n,l=Object.keys(e).some((r=>"object"!=typeof e[r])),a=Array.from({length:r+1},(()=>Array.from({length:o+(l?2:1)},(()=>null)))),s=new Map;function c(e){return"string"==typeof e?`'${e}'`:Array.isArray(e)?JavaScriptArray(e):"object"==typeof e&&null!==e?JavaScriptObject(e):e}0!==r&&(a[0][0]="(index)",l&&(a[0][1]="Value"));const{primitives:i,arrays:f,objects:p}=function(e){const r={primitives:{},arrays:{},objects:{}};return Object.keys(e).forEach((t=>{const n=e[t];"object"==typeof n?Array.isArray(n)?r.arrays[t]=n:r.objects[t]=n:r.primitives[t]=n})),r}(e);let u=1;l&&Object.keys(i).forEach((e=>{a[u][0]=e,a[u][1]=c(i[e]),u++})),Object.keys(f).forEach((e=>{a[u][0]=e,f[e].forEach(((e,r)=>{null===a[0][l?r+2:r+1]&&(a[0][l?r+2:r+1]=r+1),a[u][l?r+2:r+1]=c(e)})),u++})),Object.keys(p).forEach((e=>{a[u][0]=e;const r=p[e];Object.keys(r).forEach((e=>{let t=s.get(e)||a[0].indexOf(null);-1===t?(t=a[0].length,a[0][t]=e):a[0][t]=a[0][t]||e,s.set(e,t),a[u][t]=c(r[e])})),u++}));let g=Math.max(...a.map((e=>e.length)));for(let e=0;e<a.length;e++)for(;a[e].length<g;)a[e].push(null);return a}(e))}):console.log(e)},console.clear=()=>{self.postMessage({type:"clear"})};const Fetch=fetch;fetch=(e,r={})=>(r.mode="cors",Fetch(e,r));try{self.postMessage({executionStatus:"executionStarted"});const result=function(){eval(`(() => { ${transpiledCode} })()`)}();void 0!==result&&self.postMessage({type:"log",message:result,typeOf:typeof result})}catch(e){const r=e instanceof SyntaxError?"Syntax Error":"Runtime Error";self.postMessage({type:"error",message:`${r}: ${e.message}`})}finally{performance.mark("executionEnded"),performance.measure("Execution Time","executionStarted","executionEnded"),self.postMessage({executionStatus:"executionEnded",executionTime:performance.getEntriesByName("Execution Time")[0].duration})}};