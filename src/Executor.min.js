self.onmessage=function(event){const{code:code,ESM:ESM,TS:TS,formatCode:formatCode}=event.data;let transpiledCode;function ESMTranspile(e){return importScripts("../libs/babel/babel.min.js"),Babel.transform(e,{presets:["env","es2015"],plugins:["transform-modules-umd"]}).code}function TSTranspile(e){return importScripts("../libs/babel/babel.min.js"),Babel.transform(e,{filename:"script.ts",presets:["typescript"],plugins:["transform-modules-umd"]}).code}performance.mark("executionStarted"),transpiledCode=!0===ESM?ESMTranspile(code):!0===TS?TSTranspile(code):code;const timers={},counts={};let level=0;function JavaScriptObject(e,t=1,r=formatCode){let n=r?" ".repeat(4*t):"",o=r?"{\n":"{ ";for(let l in e)if(e.hasOwnProperty(l)){let a=e[l];"string"==typeof a?a=`'${JavaScriptString(a)}'`:Array.isArray(a)?a=JavaScriptArray(a,t+1,r):"object"==typeof a&&null!==a&&(a=JavaScriptObject(a,t+1,r)),o+=r?`${n}${l}: ${a},\n`:`${l}: ${a}, `}return o=r?o.slice(0,-2)+`\n${" ".repeat(4*(t-1))}}`:o.slice(0,-2)+" }",o}function JavaScriptArray(e,t=1,r=formatCode){let n=r?" ".repeat(4*t):"",o=r?"[\n":"[";for(let l=0;l<e.length;l++){let a=e[l];"string"==typeof a?a=`'${JavaScriptString(a)}'`:Array.isArray(a)?a=JavaScriptArray(a,t+1,r):"object"==typeof a&&null!==a&&(a=JavaScriptObject(a,t+1,r)),o+=r?`${n}${a},\n`:`${a}, `}return o=r?o.slice(0,-2)+`\n${" ".repeat(4*(t-1))}]`:o.slice(0,-2)+"]",o}function JavaScriptString(e){return e=(e=(e=(e=(e=e.replace(/\\/g,"\\").replace(/\'/g,"'").replace(/\"/g,'"').replace(/\n/g,"\n").replace(/\r/g,"\r").replace(/\t/g,"\t")).replace(/\u([0-9A-Fa-f]{4})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))).replace(/\u\{([0-9A-Fa-f]+)\}/g,((e,t)=>String.fromCodePoint(parseInt(t,16))))).replace(/\x([0-9A-Fa-f]{2})/g,((e,t)=>String.fromCharCode(parseInt(t,16))))).replace(/\([0-7]{1,3}\)/g,((e,t)=>String.fromCharCode(parseInt(t,8))))}function JavaScriptNumber(e){return e}function JavaScriptBoolean(e){return e}function JavaScriptBigInt(e){return`${e}n`}function masterConsoleHandler(e,...t){let r=t.map((e=>{let t;switch(e.constructor.name){case"Array":t=JavaScriptArray(e);break;case"Object":t=JavaScriptObject(e);break;case"String":t=JavaScriptString(e);break;case"BigInt":t=JavaScriptBigInt(e);break;case"Number":t=JavaScriptNumber(e);break;case"Boolean":t=JavaScriptBoolean(e);break;default:t=e}return t})).join(" ");return r=" ".repeat(2*level)+r.replace(/\u000A/g,"\n"+" ".repeat(2*level)),{type:e,message:r,typeOf:typeof t,method:e}}console.log=(...e)=>{self.postMessage(masterConsoleHandler("log",...e))},console.warn=(...e)=>{self.postMessage(masterConsoleHandler("warn",...e))},console.error=(...e)=>{self.postMessage(masterConsoleHandler("error",...e))},console.time=(e="default")=>{timers[e]=performance.now()},console.timeLog=(e="default",...t)=>{if(timers[e]){const r=`${e}: ${+(performance.now()-timers[e]).toFixed(3)}ms`;self.postMessage({type:"log",message:[r,...t].join(" "),method:"timeLog"})}else{const t=`No such label: ${e}`;self.postMessage({type:"error",message:t,method:"timeLog"})}},console.timeEnd=(e="default",...t)=>{if(timers[e]){const r=`${e}: ${+(performance.now()-timers[e]).toFixed(3)}ms`;self.postMessage({type:"log",message:[r,...t].join(" "),method:"timeEnd"}),delete timers[e]}else{const t=`No such label: ${e}`;self.postMessage({type:"error",message:t,method:"timeEnd"})}},console.count=(e="default")=>{counts[e]?counts[e]++:counts[e]=1;const t=`${e}: ${counts[e]}`;self.postMessage({type:"log",message:t,method:"count"})},console.countReset=(e="default")=>{if(counts[e])counts[e]=0;else{const t=`No such label: ${e}`;self.postMessage({type:"error",message:t,method:"countReset"})}},console.assert=(e,...t)=>{if(!e){const e=`Assertion failed: ${t.join(" ")}`;self.postMessage({type:"error",message:e,method:"assert"})}},console.info=(...e)=>{self.postMessage(masterConsoleHandler("info",...e))},console.debug=(...e)=>{self.postMessage(masterConsoleHandler("debug",...e))},console.group=()=>{level++},console.groupEnd=()=>{level--},console.groupCollapsed=()=>{level++},console.dir=e=>{self.postMessage({type:"log",message:function e(t,r=0){let n=" ".repeat(4*r),o="";if("object"==typeof t&&null!==t)if(Array.isArray(t))o+=JavaScriptArray(t);else{o+="Object";let l=!0;for(let a in t)if(t.hasOwnProperty(a)){l&&(o+="\n",l=!1);let s=t[a];o+="object"==typeof s&&null!==s?`${n}${a}: ${e(s,r+1)}\n`:"function"==typeof s?`${n}${a}: ${s.toString()}\n`:"string"==typeof s?`${n}${a}: "${s}"\n`:`${n}${a}: ${s}\n`}o=o.trim()}else o+=String(t);return o.trim()}(e),method:"dir"})},console.table=e=>{e&&"object"==typeof e?self.postMessage({type:"log",method:"table",message:function(e){var t=Math.floor;function r(e,r,n,o,l){var a,s,c=String.fromCharCode,i="";if(o&&(i+=" "),"letter"==n){s="",a=l;do{s=c(65+a%26)+s,a=t(a/26)-1}while(-1<a);i+=s}else i+=(l+1).toString();return o&&(i+=" "),{cell:{x:e,y:r,colspan:1,rowspan:1},empty:!1,pseudoRows:[i],maxWidth:i.length,vAlign:"middle",hAlign:"center"}}function n(e,t,r,n,i,f,p,u,g,m){var d,h,y,b,v,x="";if(-1==m){if(y="horizontalTop","none"==g.horizontalTop)return x}else if(m>=e.vLen-1){if(y="horizontalBottom","none"==g.horizontalBottom)return x}else if(s(e,g,m,p))y="horizontalInnerHeader";else{if(!c(e,g,m))return x;y="horizontalInner"}var S=g[y],A=i[f][S].horizontal;for(x+=o(e,g,p,u,n,m,-1),d=0;d<t.length;d++){if(b=!0,-1<m&&((v=e.arr[m][d]).cell.x+v.cell.rowspan-1>m&&(b=!1,x+=a(e,l(e,r,g,p,m+1,d)-1,t,m,d),d+=v.cell.colspan-1)),b)for(h=0;h<t[d];h++)x+=A;x+=o(e,g,p,u,n,m,d)}return 0==t.length&&(x+=o(e,g,p,u,n,m,t.length)),x+="\n"}function o(e,t,r,n,o,l,a){var i,f,p,u,g,m,d,h="";if(-1==l)i=!0,f=!1,g="horizontalTop";else if(l>=e.vLen-1)i=!1,f=!0,g="horizontalBottom";else if(i=!1,f=!1,s(e,t,l,r))g="horizontalInnerHeader";else{if(!c(e,t,l))return h;g="horizontalInner"}if(-1==a)p=!0,u=!1,d="verticalLeft";else if(a>=e.hLen-1)p=!1,u=!0,d="verticalRight";else if(p=!1,u=!1,"none"!=n&&0==a)d="verticalInnerHeader";else{if(!(a<e.hLen-1))return h;d="verticalInner"}!i&&0<=a&&((m=e.arr[l][a]).cell.y+m.cell.colspan-1>a&&(i=!0)),!f&&0<=a&&((m=e.arr[l+1][a]).cell.y+m.cell.colspan-1>a&&(f=!0)),!p&&0<=l&&((m=e.arr[l][a]).cell.x+m.cell.rowspan-1>l&&(p=!0)),!u&&0<=l&&((m=e.arr[l][a+1]).cell.x+m.cell.rowspan-1>l&&(u=!0));var y=t[g],b=t[d];return h+=o[i?"none":b][u?"none":y][f?"none":b][p?"none":y]}function l(e,t,r,n,o,l){var a,i,f,p=Math.ceil;return f=function(e,t,r,n,o,l){var a,i,f;for(a=0,i=n[o.cell.x],f=1;f<o.cell.rowspan;f++)i+=s(e,t,o.cell.x+f-1,r)||c(e,t,o.cell.x+f-1)?1:0,o.cell.x+f<=l&&(a=i),i+=n[o.cell.x+f];return{height:i,offset:a}}(e,r,n,t,i=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y],o),a=f.offset,a+="bottom"==i.vAlign?i.pseudoRows.length-f.height:"middle"==i.vAlign?p((i.pseudoRows.length-f.height)/2):0}function a(e,r,n,o,l){var a,s,c,i,f,p="";for(s=function(e,t){var r,n;for(r=e[t.cell.y],n=1;n<t.cell.colspan;n++)r+=1,r+=e[t.cell.y+n];return r}(n,a=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y]),i=a.empty?"":a.pseudoRows[r]||"",f="right"==a.hAlign?s-i.length:"center"==a.hAlign?t((s-i.length)/2):0,c=0;c<f;c++)p+=" ";for(p+=function(e){return e.replace(/[<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))}(i),f=s-i.length-f,c=0;c<f;c++)p+=" ";return p}function s(e,t,r,n){return"none"!=t.horizontalInnerHeader&&"none"!=n&&0==r&&1<e.vLen}function c(e,t,r){return"none"!=t.horizontalInner&&r<e.vLen-1}var i,f,p,u,g={none:{none:{double:{double:"╗"}},double:{none:{double:"═"},double:{none:"╔",double:"╦"}}},double:{none:{none:{double:"╝"},double:{none:"║",double:"╣"}},double:{none:{none:"╚",double:"╩"},double:{none:"╠",double:"╬"}}}},m={unicode:{double:{vertical:g.double.none.double.none,horizontal:g.none.double.none.double}}},d=!0,h="unicode",y="first_line",b="none",v={horizontalTop:"double",horizontalInnerHeader:"double",horizontalInner:"double",horizontalBottom:"double",verticalLeft:"double",verticalInnerHeader:"double",verticalInner:"double",verticalRight:"double",asciiIntersection:"plus"},x=function(e,t,n,o){var l,a,s,c,i,f,p,u,g,m=[],d=e,h=0,y=0;for(l=0;l<d.length;l++){if(0==l&&("number"==n||"letter"==n)){for(m.push([]),("number"==o||"letter"==o)&&(m[0][0]={cell:{x:0,y:0,colspan:1,rowspan:1},empty:!0},y=1),a=0;a<d[l].length;a++)m[0][a+y]={cell:{x:0,y:a+y,colspan:1,rowspan:1},empty:!0};h=1}for(m.push([]),("number"==o||"letter"==o)&&(m[l+h][0]={cell:{x:l+h,y:0,colspan:1,rowspan:1},empty:!0},y=1),a=0;a<d[l].length;a++)if(c={x:l+h,y:a+y,colspan:1,rowspan:1},i=d[l][a]){for(p=0,f=i.toString().split("\n"),s=0;s<f.length;s++)t&&(0!==f[s].indexOf(" ",0)&&(f[s]=" "+f[s]),-1===f[s].indexOf(" ",f[s].length-1)&&(f[s]+=" ")),f[s].length>p&&(p=f[s].length);m[l+h][a+y]={cell:c,empty:!1,pseudoRows:f,maxWidth:p,vAlign:"top",hAlign:"left"}}else m[l+h][a+y]={cell:c,empty:!0}}if(u=function(e,t,r){var n,o,l,a,s=0;for(n=t;0<=n;n--)for(o=0;o<=r;o++)(l=e[n][o]).empty||(a=l.cell.x+l.cell.rowspan)>s&&(s=a);return s}(m,l+h-1,a+y-1),g=function(e,t,r){var n,o,l,a,s=0;for(o=r;0<=o;o--)for(n=0;n<=t;n++)(l=e[n][o]).empty||(a=l.cell.y+l.cell.colspan)>s&&(s=a);return s}(m,l+h-1,a+y-1),"none"!=o&&(y=1),"number"==n||"letter"==n)for(a=0;a<g-y;a++)m[0][a+y]=r(0,a+y,n,t,a);if("none"!=n&&(h=1),"number"==o||"letter"==o)for(l=0;l<u-h;l++)m[l+h][0]=r(l+h,0,o,t,l);return{arr:m,vLen:u,hLen:g}}(e,d,y,b),S=function(e,t){var r,n,o,l,a=[],s=[];for(n=0;n<e.hLen;n++){for(o=0,t&&(o=1),r=0;r<e.vLen;r++)(l=e.arr[r][n]).empty||(1==l.cell.colspan&&1==l.cell.rowspan?l.maxWidth>o&&(o=l.maxWidth):r==l.cell.x&&n==l.cell.y&&s.push(l));a[n]=o}return a}(x,d),A=function(e,t,r,n){var o,l,a,s,c=[],i=[];for(o=0;o<e.vLen;o++){for(a=0,n&&(a=1),l=0;l<e.hLen;l++)(s=e.arr[e.arr[o][l].cell.x][e.arr[o][l].cell.y]).empty||(1==s.cell.colspan&&1==s.cell.rowspan?s.pseudoRows.length>a&&(a=s.pseudoRows.length):o==s.cell.x&&l==s.cell.y&&i.push(s));c[o]=a}return c}(x,0,0,d),$="";for($+=n(x,S,A,g,m,h,y,b,v,-1),i=0;i<x.vLen;i++){for(u=[],f=0;f<S.length;f++)u[f]=l(x,A,v,y,i,f);for(p=0;p<A[i];p++){for($+=m[h][v.verticalLeft].vertical,f=0;f<S.length;f++)$+=a(x,u[f]+p,S,i,f),(f+=x.arr[i][f].cell.colspan-1)<S.length-1&&($+=m[h][v.verticalInner].vertical);$+=m[h][v.verticalRight].vertical,$+="\n"}$+=n(x,S,A,g,m,h,y,b,v,i)}return 0==x.vLen&&($+=n(x,S,A,g,m,h,y,b,v,x.vLen)),$.trim()}(function(e){const t=e.length||Object.keys(e).length,{maxObjectLength:r,maxArrayLength:n}=Object.values(e).reduce(((e,t)=>("object"!=typeof t||Array.isArray(t)?Array.isArray(t)&&(e.maxArrayLength=Math.max(e.maxArrayLength,t.length)):e.maxObjectLength=Math.max(e.maxObjectLength,Object.keys(t).length),e)),{maxObjectLength:0,maxArrayLength:0}),o=r+n,l=Object.keys(e).some((t=>"object"!=typeof e[t])),a=Array.from({length:t+1},(()=>Array.from({length:o+(l?2:1)},(()=>null)))),s=new Map;function c(e){return"string"==typeof e?`'${e}'`:Array.isArray(e)?JavaScriptArray(e):"object"==typeof e&&null!==e?JavaScriptObject(e):e}0!==t&&(a[0][0]="(index)",l&&(a[0][1]="Value"));const{primitives:i,arrays:f,objects:p}=function(e){const t={primitives:{},arrays:{},objects:{}};return Object.keys(e).forEach((r=>{const n=e[r];"object"==typeof n?Array.isArray(n)?t.arrays[r]=n:t.objects[r]=n:t.primitives[r]=n})),t}(e);let u=1;l&&Object.keys(i).forEach((e=>{a[u][0]=e,a[u][1]=c(i[e]),u++})),Object.keys(f).forEach((e=>{a[u][0]=e,f[e].forEach(((e,t)=>{null===a[0][l?t+2:t+1]&&(a[0][l?t+2:t+1]=t+1),a[u][l?t+2:t+1]=c(e)})),u++})),Object.keys(p).forEach((e=>{a[u][0]=e;const t=p[e];Object.keys(t).forEach((e=>{let r=s.get(e)||a[0].indexOf(null);-1===r?(r=a[0].length,a[0][r]=e):a[0][r]=a[0][r]||e,s.set(e,r),a[u][r]=c(t[e])})),u++}));let g=Math.max(...a.map((e=>e.length)));for(let e=0;e<a.length;e++)for(;a[e].length<g;)a[e].push(null);return a}(e))}):console.log(e)},console.clear=()=>{self.postMessage({type:"clear",method:"clear"})};const Fetch=fetch;fetch=(e,t={})=>(t.mode="cors",Fetch(e,t));try{self.postMessage({executionStatus:"executionStarted"});const result=function(){eval(`(() => { ${transpiledCode} })()`)}();void 0!==result&&self.postMessage({type:"log",message:result,typeOf:typeof result})}catch(e){const t=e instanceof SyntaxError?"Syntax Error":"Runtime Error";self.postMessage({type:"error",message:`${t}: ${e.message}`})}finally{performance.mark("executionEnded"),performance.measure("Execution Time","executionStarted","executionEnded"),self.postMessage({executionStatus:"executionEnded",executionTime:performance.getEntriesByName("Execution Time")[0].duration})}};